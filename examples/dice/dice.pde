#include "pcd8544.h"

#ifdef BOARD_maple
#define PROGMEM __attribute__ ((section (".USER_FLASH")))
#define pgm_read_byte(adr) *(adr)
#else
#include <avr/pgmspace.h>
#endif


pcd8544 lcd(5, 6, 7);


uint8_t die_patterns[6][2][15] PROGMEM = {
	{0xFF,0x01,0x01,0x01,0x01,0x01,0xC1,0xC1,0xC1,0x01,0x01,0x01,0x01,0x01,0xFF,
	 0x7F,0x40,0x40,0x40,0x40,0x40,0x41,0x41,0x41,0x40,0x40,0x40,0x40,0x40,0x7F},

	{0xFF,0x01,0x1D,0x1D,0x1D,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,
	 0x7F,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x5C,0x5C,0x5C,0x40,0x7F},

	{0xFF,0x01,0x1D,0x1D,0x1D,0x01,0xC1,0xC1,0xC1,0x01,0x01,0x01,0x01,0x01,0xFF,
	 0x7F,0x40,0x40,0x40,0x40,0x40,0x41,0x41,0x41,0x40,0x5C,0x5C,0x5C,0x40,0x7F},

	{0xFF,0x01,0x1D,0x1D,0x1D,0x01,0x01,0x01,0x01,0x01,0x1D,0x1D,0x1D,0x01,0xFF,
	 0x7F,0x40,0x5c,0x5c,0x5c,0x40,0x40,0x40,0x40,0x40,0x5C,0x5C,0x5C,0x40,0x7F},

	{0xFF,0x01,0x1D,0x1D,0x1D,0x01,0xC1,0xC1,0xC1,0x01,0x1D,0x1D,0x1D,0x01,0xFF,
	 0x7F,0x40,0x5c,0x5c,0x5c,0x40,0x41,0x41,0x41,0x40,0x5C,0x5C,0x5C,0x40,0x7F},

	{0xFF,0x01,0xDD,0xDD,0xDD,0x01,0x01,0x01,0x01,0x01,0xDD,0xDD,0xDD,0x01,0xFF,
	 0x7F,0x40,0x5D,0x5D,0x5D,0x40,0x40,0x40,0x40,0x40,0x5D,0x5D,0x5D,0x40,0x7F},
};


uint8_t pat[] PROGMEM = {0xFF,0x01,0x01,0x01,0x01,0x01,0xC1,0xC1,0xC1,0x01,0x01,0x01,0x01,0x01,0xFF,
		       0x7F,0x40,0x40,0x40,0x40,0x40,0x41,0x41,0x41,0x40,0x40,0x40,0x40,0x40,0x7F};

void draw_die(uint8_t value)
{
	if (value > 6 || value < 1)
		return;

	lcd.bitmap((uint8_t *)die_patterns[value-1], 2, 15); 
}


void setup(void)
{
	lcd.begin();
	lcd.clear();
	lcd.println(" Hello, nerd");
	for (uint8_t i = 1; i <= 3; i++) {
		lcd.gotoRc(2, 16*i+1);
		draw_die(i+3);
	}
}


void loop(void)
{
}
